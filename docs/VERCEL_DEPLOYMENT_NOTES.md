# Vercel éƒ¨ç½²è¯´æ˜Ž

## å½“å‰çŠ¶æ€

### âœ… å·²ä¿®å¤
- **é—®é¢˜**: ML æ¨¡å—å¯¼å…¥å¤±è´¥å¯¼è‡´æ‰€æœ‰ API è¿”å›ž 500 é”™è¯¯
- **åŽŸå› **: Vercel çŽ¯å¢ƒç¼ºå°‘ `sklearn`ã€`statsmodels` ç­‰ ML ä¾èµ–åŒ…
- **è§£å†³**: å°† ML æ¨¡å—æ”¹ä¸ºæ¡ä»¶å¯¼å…¥ï¼Œä¸å½±å“å…¶ä»– API æ­£å¸¸è¿è¡Œ

### ðŸŸ¡ å½“å‰é™åˆ¶
- **ML API åœ¨ Vercel ä¸Šä¸å¯ç”¨**ï¼šæ™ºèƒ½åˆ†æžä¸­å¿ƒé¡µé¢åœ¨ç”Ÿäº§çŽ¯å¢ƒæ— æ³•ä½¿ç”¨
- **å…¶ä»– API æ­£å¸¸**ï¼šæ²‰é™ã€æ¸©åº¦ã€è£‚ç¼ã€æŒ¯åŠ¨ç­‰æ‰€æœ‰å…¶ä»–åŠŸèƒ½æ­£å¸¸

## ML åŠŸèƒ½éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šæ·»åŠ  requirements.txtï¼ˆæŽ¨èï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `requirements.txt`ï¼Œè®© Vercel è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼š

```txt
scikit-learn==1.3.2
statsmodels==0.14.1
pandas==2.1.4
numpy==1.26.3
```

**ä¼˜ç‚¹**ï¼š
- ç®€å•ç›´æŽ¥
- ML åŠŸèƒ½å®Œå…¨å¯ç”¨

**ç¼ºç‚¹**ï¼š
- å¢žåŠ éƒ¨ç½²åŒ…å¤§å°ï¼ˆçº¦ 100MBï¼‰
- å¯èƒ½è¶…å‡º Vercel Serverless Function é™åˆ¶ï¼ˆ50MBï¼‰
- å†·å¯åŠ¨æ—¶é—´å¢žåŠ 

### æ–¹æ¡ˆ 2ï¼šåˆ†ç¦» ML API åˆ°ç‹¬ç«‹æœåŠ¡

å°† ML API éƒ¨ç½²åˆ°æ”¯æŒå¤§åž‹ä¾èµ–çš„å¹³å°ï¼š

**é€‰é¡¹ Aï¼šRailway / Render**
- æ”¯æŒå®Œæ•´ Python çŽ¯å¢ƒ
- æ— å¤§å°é™åˆ¶
- å‰ç«¯é€šè¿‡ä»£ç†è®¿é—®

**é€‰é¡¹ Bï¼šAWS Lambda + Layer**
- ä½¿ç”¨ Lambda Layer å­˜å‚¨ ML ä¾èµ–
- æ›´å¤§çš„åŒ…å¤§å°é™åˆ¶ï¼ˆ250MBï¼‰

**é€‰é¡¹ Cï¼šDocker å®¹å™¨éƒ¨ç½²**
- ä½¿ç”¨ Docker æ‰“åŒ…å®Œæ•´çŽ¯å¢ƒ
- éƒ¨ç½²åˆ° Railwayã€Fly.io ç­‰

### æ–¹æ¡ˆ 3ï¼šä½¿ç”¨è½»é‡çº§æ›¿ä»£æ–¹æ¡ˆ

æ›¿æ¢é‡é‡çº§ ML åº“ï¼š

```python
# æ›¿ä»£ sklearn
import numpy as np  # æ‰‹åŠ¨å®žçŽ°ç®€å•ç®—æ³•

# æ›¿ä»£ statsmodels
from scipy import stats  # ä½¿ç”¨ scipy çš„ç»Ÿè®¡åŠŸèƒ½
```

**ä¼˜ç‚¹**ï¼š
- åŒ…å¤§å°å°
- éƒ¨ç½²å¿«é€Ÿ

**ç¼ºç‚¹**ï¼š
- åŠŸèƒ½å—é™
- éœ€è¦é‡å†™éƒ¨åˆ†ä»£ç 

## æŽ¨èæ–¹æ¡ˆ

### çŸ­æœŸï¼ˆç«‹å³å¯ç”¨ï¼‰
**å½“å‰æ–¹æ¡ˆ**ï¼šML åŠŸèƒ½ä»…åœ¨æœ¬åœ°çŽ¯å¢ƒå¯ç”¨
- æœ¬åœ°å¼€å‘ï¼šå®Œæ•´ ML åŠŸèƒ½
- ç”Ÿäº§çŽ¯å¢ƒï¼šå…¶ä»–åŠŸèƒ½æ­£å¸¸ï¼ŒML åŠŸèƒ½ç¦ç”¨

### ä¸­æœŸï¼ˆ1-2å¤©ï¼‰
**æ–¹æ¡ˆ 1**ï¼šå°è¯•æ·»åŠ  requirements.txt
1. åˆ›å»º `requirements.txt`
2. æµ‹è¯• Vercel éƒ¨ç½²
3. å¦‚æžœè¶…å‡ºé™åˆ¶ï¼Œè€ƒè™‘æ–¹æ¡ˆ 2

### é•¿æœŸï¼ˆ1å‘¨ï¼‰
**æ–¹æ¡ˆ 2A**ï¼šåˆ†ç¦» ML API åˆ° Railway
1. åˆ›å»ºç‹¬ç«‹çš„ ML API æœåŠ¡
2. éƒ¨ç½²åˆ° Railwayï¼ˆå…è´¹é¢åº¦è¶³å¤Ÿï¼‰
3. å‰ç«¯é…ç½®ä»£ç†è®¿é—®

## å®žæ–½æ­¥éª¤

### ç«‹å³å°è¯•ï¼šæ·»åŠ  requirements.txt

```bash
# 1. åˆ›å»º requirements.txt
cat > requirements.txt << EOF
scikit-learn==1.3.2
statsmodels==0.14.1
pandas==2.1.4
numpy==1.26.3
EOF

# 2. æäº¤å¹¶æŽ¨é€
git add requirements.txt
git commit -m "feat: add ML dependencies for Vercel deployment"
git push origin master

# 3. ç­‰å¾… Vercel é‡æ–°éƒ¨ç½²
# 4. æ£€æŸ¥éƒ¨ç½²æ—¥å¿—
```

### å¦‚æžœæ–¹æ¡ˆ 1 å¤±è´¥ï¼šåˆ†ç¦» ML API

```bash
# 1. åˆ›å»ºç‹¬ç«‹çš„ ML API é¡¹ç›®
mkdir ml-api-service
cd ml-api-service

# 2. å¤åˆ¶ ML æ¨¡å—
cp -r ../backend/modules/ml_models .

# 3. åˆ›å»ºç®€å•çš„ Flask åº”ç”¨
# 4. éƒ¨ç½²åˆ° Railway
# 5. æ›´æ–°å‰ç«¯ API é…ç½®
```

## çŽ¯å¢ƒå˜é‡é…ç½®

### Vercel çŽ¯å¢ƒå˜é‡
```env
# æ•°æ®åº“é…ç½®
DB_HOST=your-db-host
DB_USER=your-db-user
DB_PASSWORD=your-db-password
DB_NAME=settlement_monitoring

# ML API é…ç½®ï¼ˆå¦‚æžœä½¿ç”¨ç‹¬ç«‹æœåŠ¡ï¼‰
ML_API_URL=https://your-ml-api.railway.app
```

## ç›‘æŽ§å’Œæ—¥å¿—

### æ£€æŸ¥ ML API çŠ¶æ€
```bash
# æœ¬åœ°çŽ¯å¢ƒ
curl http://localhost:5000/api/ml/health

# ç”Ÿäº§çŽ¯å¢ƒï¼ˆå¦‚æžœå¯ç”¨ï¼‰
curl https://your-domain.vercel.app/api/ml/health
```

### æŸ¥çœ‹ Vercel æ—¥å¿—
1. è®¿é—® Vercel Dashboard
2. é€‰æ‹©é¡¹ç›®
3. æŸ¥çœ‹ Functions æ—¥å¿—
4. æœç´¢ "ML API" ç›¸å…³ä¿¡æ¯

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆä¸ç›´æŽ¥åœ¨ Vercel ä¸Šå®‰è£… ML ä¾èµ–ï¼Ÿ
A: Vercel Serverless Functions æœ‰ 50MB çš„å¤§å°é™åˆ¶ï¼ŒML åº“é€šå¸¸è¶…è¿‡è¿™ä¸ªé™åˆ¶ã€‚

### Q: æœ¬åœ°å¼€å‘å¦‚ä½•ä½¿ç”¨ ML åŠŸèƒ½ï¼Ÿ
A: æœ¬åœ°çŽ¯å¢ƒæ­£å¸¸å®‰è£…ä¾èµ–å³å¯ï¼š
```bash
pip install scikit-learn statsmodels pandas numpy
python backend/modules/api/api_server.py
```

### Q: ç”Ÿäº§çŽ¯å¢ƒç”¨æˆ·èƒ½çœ‹åˆ°æ™ºèƒ½åˆ†æžä¸­å¿ƒå—ï¼Ÿ
A: å¯ä»¥çœ‹åˆ°é¡µé¢ï¼Œä½†ä¼šæ˜¾ç¤ºåŠ è½½é”™è¯¯ã€‚å»ºè®®ï¼š
- æ–¹æ¡ˆ Aï¼šéšè—æ™ºèƒ½åˆ†æžä¸­å¿ƒèœå•ï¼ˆç”Ÿäº§çŽ¯å¢ƒï¼‰
- æ–¹æ¡ˆ Bï¼šæ˜¾ç¤º"åŠŸèƒ½å¼€å‘ä¸­"æç¤º
- æ–¹æ¡ˆ Cï¼šå®Œæˆ ML API ç‹¬ç«‹éƒ¨ç½²

### Q: å¦‚ä½•åˆ¤æ–­ ML API æ˜¯å¦å¯ç”¨ï¼Ÿ
A: æ£€æŸ¥ `/api/ml/health` ç«¯ç‚¹ï¼š
- 200: ML API å¯ç”¨
- 404: ML API æœªæ³¨å†Œï¼ˆä¾èµ–ç¼ºå¤±ï¼‰

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³**ï¼šéªŒè¯å…¶ä»– API æ˜¯å¦æ¢å¤æ­£å¸¸
2. **ä»Šå¤©**ï¼šå°è¯•æ·»åŠ  requirements.txt
3. **æœ¬å‘¨**ï¼šå¦‚æžœæ–¹æ¡ˆ 1 å¤±è´¥ï¼Œå®žæ–½æ–¹æ¡ˆ 2ï¼ˆç‹¬ç«‹éƒ¨ç½²ï¼‰
4. **å¯é€‰**ï¼šæ·»åŠ å‰ç«¯çŽ¯å¢ƒæ£€æµ‹ï¼Œç”Ÿäº§çŽ¯å¢ƒéšè— ML åŠŸèƒ½

---

**æ›´æ–°æ—¥æœŸ**: 2026-02-02
**çŠ¶æ€**: å…¶ä»– API å·²ä¿®å¤ï¼ŒML åŠŸèƒ½å¾…éƒ¨ç½²
**è´Ÿè´£äºº**: Claude Code AI Assistant
